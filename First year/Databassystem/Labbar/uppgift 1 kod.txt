create sequence myseq
start with 1
increment by 1;

select myseq.nextval
from dual;

CREATE TABLE KUND (
    persnr varchar2(13),
    username varchar2(50) NOT NULL,
    passwd varchar2(50) NOT NULL,
    fnamn varchar2(60) NOT NULL,
    enamn varchar2(60) NOT NULL,
    kredittyp varchar2(20) NOT NULL,
    telnr varchar2(12)
);

drop constraint KUND_KREDITTYP_CK

alter table KUND
ADD CONSTRAINT KUND_kredittyp_ck CHECK (kredittyp in ('låg', 'medel', 'hög'))

INSERT INTO KUND(persnr,username,passwd,fnamn,enamn,kredittyp,telnr)
VALUES('19900617-5678','calel','12345','Calle','Andersson','medel','0705551122');

INSERT INTO KUND(persnr,username,passwd,fnamn,enamn,kredittyp,telnr)
VALUES('20030509-1234','kackj','67890','Jimmy','Kack','hög','0706667722');

INSERT INTO KUND(persnr,username,passwd,fnamn,enamn,kredittyp,telnr)
VALUES('19830312-1134','mickes','12340','Mikael','Smids','låg','0706998822');

ALTER TABLE KUND
ADD CONSTRAINT KUND_persnr_pk PRIMARY KEY (persnr);

ALTER TABLE KUND
ADD CONSTRAINT KUND_username_ck CHECK (username IS NOT NULL);

ALTER TABLE KUND
ADD CONSTRAINT KUND_passwd_ck CHECK (passwd IS NOT NULL);

ALTER TABLE KUND
ADD CONSTRAINT KUND_fnamn_ck CHECK (fnamn IS NOT NULL);

ALTER TABLE KUND
ADD CONSTRAINT KUND_enamn_ck CHECK (enamn IS NOT NULL);

ALTER TABLE KUND
ADD CONSTRAINT KUND_kredittyp_ck CHECK (kredittyp IS NOT NULL);

ALTER TABLE KUND
ADD CONSTRAINT KUND_telnr_uq UNIQUE (telnr);

ALTER TABLE KUND
DROP CONSTRAINT SYS_C00153479629
DROP CONSTRAINT SYS_C00153479630
DROP CONSTRAINT SYS_C00153479631
DROP CONSTRAINT SYS_C00153479632
DROP CONSTRAINT SYS_C00153479633

CREATE TABLE KUNDORDER (
    ordnr number(12),
    persnr varchar(13) NOT NULL,
    datum date default sysdate NOT NULL
);

ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_ordnr_pk PRIMARY KEY (ordnr);
 
ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_persnr_fk FOREIGN KEY (persnr) REFERENCES KUND(persnr);
 
ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_datum_ck CHECK (datum IS NOT NULL);

select constraint_name,constraint_type
from user_constraints
where table_name = 'KUND';

alter table kund
DROP CONSTRAINT SYS_C00153481217
DROP CONSTRAINT SYS_C00153481218
DROP CONSTRAINT SYS_C00153481219
DROP CONSTRAINT SYS_C00153481220
DROP CONSTRAINT SYS_C00153481221


CREATE TABLE KUNDORDER (
    ordnr number(12),
    persnr varchar(13) NOT NULL,
    datum date default sysdate NOT NULL
);

ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_ordnr_pk PRIMARY KEY (ordnr);
 
ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_persnr_fk FOREIGN KEY (persnr) REFERENCES KUND(persnr);
 
ALTER TABLE KUNDORDER
ADD CONSTRAINT KUNDORDER_datum_ck CHECK (datum IS NOT NULL);

select constraint_name,constraint_type
from user_constraints
where table_name = 'KUNDORDER';

alter table KUNDORDER
drop constraint SYS_C00153481387	
drop constraint SYS_C00153481388


CREATE TABLE VARUGRUPP(
    vgnr varchar2(20),
    vgnamn varchar2(200) NOT NULL
);

INSERT INTO VARUGRUPP(vgnr,vgnamn)
VALUES ('EALL-23','Teknik');
INSERT INTO VARUGRUPP(vgnr,vgnamn)
VALUES ('ODPP-23','Sport'); 

ALTER TABLE VARUGRUPP
ADD CONSTRAINT VARUGRUPP_vgnr_pk PRIMARY KEY (vgnr);

ALTER TABLE VARUGRUPP
ADD CONSTRAINT VARUGRUPP_vgnamn_ck CHECK (vgnamn IS NOT NULL);

select constraint_name,constraint_type
from user_constraints
where table_name = 'VARUGRUPP';

alter table VARUGRUPP
drop constraint SYS_C00153481551

CREATE TABLE ARTIKEL(
    artnr varchar2(20),
    vgnr varchar2(20) NOT NULL,
    artnamn varchar2(200) NOT NULL,
    pris float NOT NULL
);

insert into ARTIKEL (artnr, vgnr, artnamn, pris)
values ('20202020', 'EALL-23', 'Batman docka', 3000);

insert into ARTIKEL (artnr, vgnr, artnamn, pris)
values ('30303030', 'ODPP-23', 'Specialdesignad tavla', 50000);


select *
from ARTIKEL

ALTER TABLE ARTIKEL 
ADD CONSTRAINT ARTIKEL_artnr_pk PRIMARY KEY (artnr);

ALTER TABLE ARTIKEL 
ADD CONSTRAINT ARTIKEL_vgnr_fk FOREIGN KEY (vgnr) REFERENCES VARUGRUPP(vgnr);

ALTER TABLE ARTIKEL 
ADD CONSTRAINT ARTIKEL_artnamn_pk CHECK (artnamn IS NOT NULL);

ALTER TABLE ARTIKEL 
ADD CONSTRAINT ARTIKEL_pris_pk CHECK (pris IS NOT NULL);

select constraint_name,constraint_type
from user_constraints
where table_name = 'ARTIKEL';

alter table ARTIKEL
drop constraint SYS_C00153481841
drop constraint SYS_C00153481839	
drop constraint SYS_C00153481840	

CREATE TABLE KUNDVAGN(
    radnr number(12),
    ordnr number(12) NOT NULL,
    artnr varchar2(20) NOT NULL,
    antal number(12) NOT NULL
);

ALTER TABLE KUNDVAGN 
ADD CONSTRAINT KUNDVAGN_radnr_pk PRIMARY KEY (radnr);

ALTER TABLE KUNDVAGN 
ADD CONSTRAINT KUNDVAGN_ordnr_fk FOREIGN KEY (ordnr) REFERENCES KUNDORDER(ordnr);

ALTER TABLE KUNDVAGN 
ADD CONSTRAINT KUNDVAGN_artnr_fk FOREIGN KEY (artnr) REFERENCES ARTIKEL(artnr);

ALTER TABLE KUNDVAGN 
ADD CONSTRAINT KUNDVAGN_antal_ck CHECK (antal IS NOT NULL);

select constraint_name,constraint_type
from user_constraints
where table_name = 'KUNDVAGN';

alter table KUNDVAGN
drop constraint SYS_C00153482628	
drop constraint SYS_C00153482629	
drop constraint SYS_C00153482630

CREATE TABLE ARTIKELBILD(
    bildnr varchar2(20),
    artnr varchar2(20) NOT NULL,
    filtyp varchar2(30) NOT NULL,
    width number(6) NOT NULL,
    height number(6) NOT NULL,
    path varchar2(300) NOT NULL
);


ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_bildnr_pk PRIMARY KEY(bildnr);

ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_artnr_fk FOREIGN KEY(artnr) REFERENCES ARTIKEL(artnr);

ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_filtyp_ck CHECK(filtyp in ('gif','jpg'));

ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_width_ck CHECK(width IS NOT NULL);

ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_height_ck CHECK(height IS NOT NULL);

ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_path_ck CHECK(path IS NOT NULL);


ALTER TABLE ARTIKELBILD
drop constraint SYS_C00153483321	
drop constraint SYS_C00153483322	
drop constraint SYS_C00153483323	
drop constraint SYS_C00153483324	
drop constraint SYS_C00153483325

select constraint_name,constraint_type
from user_constraints
where table_name = 'ARTIKELBILD';

select *
from KUND

ALTER TABLE ARTIKELBILD 
DROP CONSTRAINT ARTIKELBILD_filtyp_ck
ALTER TABLE ARTIKELBILD
ADD CONSTRAINT ARTIKELBILD_filtyp_ck CHECK (filtyp IN ('gif','jpg'));
ALTER TABLE KUND 
DROP CONSTRAINT KUND_username_ck
ALTER TABLE KUND
ADD CONSTRAINT KUND_username_uq UNIQUE (username);

INSERT INTO KUNDORDER (ordnr, persnr)
VALUES (myseq.nextval, '19830312-1134');

UPDATE KUNDORDER
SET datum = '02-APR-2023'
Where ordnr = 2

create sequence myseq
start with 1
increment by 1;

select myseq.nextval
FROM dual
    
select * from KUNDORDER

INSERT INTO KUNDORDER (ordnr, persnr)
VALUES (myseq.nextval, '19830312-1134');

UPDATE KUNDORDER
SET datum = '02-APR-2023'
Where ordnr = 2

select * from KUNDVAGN
Select * from KUNDORDER


delete from KUNDVAGN
    
INSERT INTO KUNDVAGN(radnr,ordnr,artnr,antal)
VALUES (myseq.nextval,2,20202020,3)
    
INSERT INTO KUNDVAGN(radnr,ordnr,artnr,antal)
VALUES (myseq.nextval,2,30303030,1)
    
select * from ARTIKEL


UPDATE ARTIKEL
SET pris = 50000
WHERE artnr = '30303030';

UPDATE ARTIKEL
SET pris = (pris * 1.23)

UPDATE KUND
SET telnr = '0761234567'
WHERE username = 'calel'

select * from KUND

DELETE FROM KUNDORDER

